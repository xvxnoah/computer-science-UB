{"payload":{"allShortcutsEnabled":true,"fileTree":{"":{"items":[{"name":"figures","path":"figures","contentType":"directory"},{"name":".gitignore","path":".gitignore","contentType":"file"},{"name":"LICENSE","path":"LICENSE","contentType":"file"},{"name":"README.md","path":"README.md","contentType":"file"},{"name":"Sessio_1.md","path":"Sessio_1.md","contentType":"file"},{"name":"Sessio_2.md","path":"Sessio_2.md","contentType":"file"},{"name":"Sessio_3.md","path":"Sessio_3.md","contentType":"file"},{"name":"Sessio_4.md","path":"Sessio_4.md","contentType":"file"},{"name":"Sessio_5.md","path":"Sessio_5.md","contentType":"file"},{"name":"requeriments.txt","path":"requeriments.txt","contentType":"file"}],"totalCount":10}},"fileTreeProcessingTime":6.137969,"foldersToFetch":[],"reducedMotionEnabled":"system","repo":{"id":621772114,"defaultBranch":"main","name":"P2","ownerLogin":"SoftwareDistribuitUB-2023","currentUserCanPush":false,"isFork":false,"isEmpty":false,"createdAt":"2023-03-31T12:59:15.000+02:00","ownerAvatar":"https://avatars.githubusercontent.com/u/124935642?v=4","public":true,"private":false},"refInfo":{"name":"main","listCacheKey":"v0:1680260356.142694","canEdit":true,"refType":"branch","currentOid":"dd22b7246eb4b33bcee18620bbd9d63a1e21d9b3"},"path":"Sessio_4.md","currentUser":{"id":47271218,"login":"xvxnoah","userEmail":"noahmv59@gmail.com"},"blob":{"rawBlob":null,"colorizedLines":null,"stylingDirectives":null,"csv":null,"csvError":null,"dependabotInfo":{"showConfigurationBanner":false,"configFilePath":null,"networkDependabotPath":"/SoftwareDistribuitUB-2023/P2/network/updates","dismissConfigurationNoticePath":"/settings/dismiss-notice/dependabot_configuration_notice","configurationNoticeDismissed":false,"repoAlertsPath":"/SoftwareDistribuitUB-2023/P2/security/dependabot","repoSecurityAndAnalysisPath":"/SoftwareDistribuitUB-2023/P2/settings/security_analysis","repoOwnerIsOrg":true,"currentUserCanAdminRepo":false},"displayName":"Sessio_4.md","displayUrl":"https://github.com/SoftwareDistribuitUB-2023/P2/blob/main/Sessio_4.md?raw=true","headerInfo":{"blobSize":"13.6 KB","deleteInfo":{"deletePath":"https://github.com/SoftwareDistribuitUB-2023/P2/delete/main/Sessio_4.md","deleteTooltip":"Fork this repository and delete the file"},"editInfo":{"editTooltip":"Fork this repository and edit the file"},"ghDesktopPath":"x-github-client://openRepo/https://github.com/SoftwareDistribuitUB-2023/P2?branch=main&filepath=Sessio_4.md","gitLfsPath":null,"onBranch":true,"shortPath":"7001f9b","siteNavLoginPath":"/login?return_to=https%3A%2F%2Fgithub.com%2FSoftwareDistribuitUB-2023%2FP2%2Fblob%2Fmain%2FSessio_4.md","isCSV":false,"isRichtext":true,"toc":[{"level":1,"text":"Sessió 4","anchor":"sessió-4","htmlText":"Sessió 4"},{"level":2,"text":"Bucles","anchor":"bucles","htmlText":"Bucles"},{"level":3,"text":"Exercici 1:","anchor":"exercici-1","htmlText":"Exercici 1:"},{"level":2,"text":"Obtenir dades d'APIs amb AXIOS","anchor":"obtenir-dades-dapis-amb-axios","htmlText":"Obtenir dades d'APIs amb AXIOS"},{"level":3,"text":"Exercici 2:","anchor":"exercici-2","htmlText":"Exercici 2:"},{"level":2,"text":"Vista de la cistella","anchor":"vista-de-la-cistella","htmlText":"Vista de la cistella"},{"level":2,"text":"Canvis en el Backend per a la cistella:","anchor":"canvis-en-el-backend-per-a-la-cistella","htmlText":"Canvis en el Backend per a la cistella:"},{"level":3,"text":"Exercici 3:","anchor":"exercici-3","htmlText":"Exercici 3:"},{"level":2,"text":"Vista taula de la cistella","anchor":"vista-taula-de-la-cistella","htmlText":"Vista taula de la cistella"},{"level":3,"text":"Exercici 5:","anchor":"exercici-5","htmlText":"Exercici 5:"},{"level":2,"text":"Botó de tornar enrere","anchor":"botó-de-tornar-enrere","htmlText":"Botó de tornar enrere"},{"level":2,"text":"Finalitza el botó de compra","anchor":"finalitza-el-botó-de-compra","htmlText":"Finalitza el botó de compra"},{"level":3,"text":"Exercici 7:","anchor":"exercici-7","htmlText":"Exercici 7:"}],"lineInfo":{"truncatedLoc":"400","truncatedSloc":"306"},"mode":"executable file"},"image":false,"isCodeownersFile":null,"isValidLegacyIssueTemplate":false,"issueTemplateHelpUrl":"https://docs.github.com/articles/about-issue-and-pull-request-templates","issueTemplate":null,"discussionTemplate":null,"language":"Markdown","large":false,"loggedIn":true,"newDiscussionPath":"/SoftwareDistribuitUB-2023/P2/discussions/new","newIssuePath":"/SoftwareDistribuitUB-2023/P2/issues/new","planSupportInfo":{"repoIsFork":null,"repoOwnedByCurrentUser":null,"requestFullPath":"/SoftwareDistribuitUB-2023/P2/blob/main/Sessio_4.md","showFreeOrgGatedFeatureMessage":null,"showPlanSupportBanner":null,"upgradeDataAttributes":null,"upgradePath":null},"publishBannersInfo":{"dismissActionNoticePath":"/settings/dismiss-notice/publish_action_from_dockerfile","dismissStackNoticePath":"/settings/dismiss-notice/publish_stack_from_file","releasePath":"/SoftwareDistribuitUB-2023/P2/releases/new?marketplace=true","showPublishActionBanner":false,"showPublishStackBanner":false},"renderImageOrRaw":false,"richText":"<article class=\"markdown-body entry-content container-lg\" itemprop=\"text\"><h1 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-sessió-4\" class=\"anchor\" aria-hidden=\"true\" href=\"#sessió-4\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Sessió 4</h1>\n<h2 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-bucles\" class=\"anchor\" aria-hidden=\"true\" href=\"#bucles\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Bucles</h2>\n<p dir=\"auto\">Vue permet utilitzar bucles i és molt útil per a llistes. Imagineu-vos que tenim una llista de partits i volem mostrar la informació de cada partit per separat. Per fer-ho, creeu una llista de partits afegint una propietat a l'estructura retornada a <code>data ()</code> del component Matches.vue:</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"matches: [\n  {\n    'id': 1,\n    'local': {\n      'id': 3,\n      'name': 'Club Juventut Les Corts',\n      'country': 'Spain'\n    },\n    'visitor': {\n      'id': 2,\n      'name': 'CE Sabadell',\n      'country': 'Spain'\n    },\n    'competition': {\n      'name': 'Women\\'s European Championship',\n      'category': 'Senior',\n      'sport': 'Volleyball'\n    },\n    'date': '2022-10-12T00:00:00',\n    'price': 4.3\n  },\n  {\n    'id': 2,\n    'local': {\n      'id': 3,\n      'name': 'Club Juventut Les Corts',\n      'country': 'Spain'\n    },\n    'visitor': {\n      'id': 2,\n      'name': 'CE Sabadell',\n      'country': 'Spain'\n    },\n    'competition': {\n      'name': '1st Division League',\n      'category': 'Junior',\n      'sport': 'Futsal'\n    },\n    'date': '2022-07-10T00:00:00',\n    'price': 129.29\n  },\n  {\n    'id': 3,\n    'local': {\n      'id': 1,\n      'name': 'CV Vall D\\'Hebron',\n      'country': 'Spain'\n    },\n    'visitor': {\n      'id': 4,\n      'name': 'Volei Rubi',\n      'country': 'Spain'\n    },\n    'competition': {\n      'name': '1st Division League',\n      'category': 'Junior',\n      'sport': 'Futsal'\n    },\n    'date': '2022-08-10T00:00:00',\n    'price': 111.1\n  }\n]\"><pre>matches: <span class=\"pl-kos\">[</span>\n  <span class=\"pl-kos\">{</span>\n    <span class=\"pl-s\">'id'</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'local'</span>: <span class=\"pl-kos\">{</span>\n      <span class=\"pl-s\">'id'</span>: <span class=\"pl-c1\">3</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'name'</span>: <span class=\"pl-s\">'Club Juventut Les Corts'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'country'</span>: <span class=\"pl-s\">'Spain'</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'visitor'</span>: <span class=\"pl-kos\">{</span>\n      <span class=\"pl-s\">'id'</span>: <span class=\"pl-c1\">2</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'name'</span>: <span class=\"pl-s\">'CE Sabadell'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'country'</span>: <span class=\"pl-s\">'Spain'</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'competition'</span>: <span class=\"pl-kos\">{</span>\n      <span class=\"pl-s\">'name'</span>: <span class=\"pl-s\">'Women\\'s European Championship'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'category'</span>: <span class=\"pl-s\">'Senior'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'sport'</span>: <span class=\"pl-s\">'Volleyball'</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'date'</span>: <span class=\"pl-s\">'2022-10-12T00:00:00'</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'price'</span>: <span class=\"pl-c1\">4.3</span>\n  <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-kos\">{</span>\n    <span class=\"pl-s\">'id'</span>: <span class=\"pl-c1\">2</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'local'</span>: <span class=\"pl-kos\">{</span>\n      <span class=\"pl-s\">'id'</span>: <span class=\"pl-c1\">3</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'name'</span>: <span class=\"pl-s\">'Club Juventut Les Corts'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'country'</span>: <span class=\"pl-s\">'Spain'</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'visitor'</span>: <span class=\"pl-kos\">{</span>\n      <span class=\"pl-s\">'id'</span>: <span class=\"pl-c1\">2</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'name'</span>: <span class=\"pl-s\">'CE Sabadell'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'country'</span>: <span class=\"pl-s\">'Spain'</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'competition'</span>: <span class=\"pl-kos\">{</span>\n      <span class=\"pl-s\">'name'</span>: <span class=\"pl-s\">'1st Division League'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'category'</span>: <span class=\"pl-s\">'Junior'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'sport'</span>: <span class=\"pl-s\">'Futsal'</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'date'</span>: <span class=\"pl-s\">'2022-07-10T00:00:00'</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'price'</span>: <span class=\"pl-c1\">129.29</span>\n  <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-kos\">{</span>\n    <span class=\"pl-s\">'id'</span>: <span class=\"pl-c1\">3</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'local'</span>: <span class=\"pl-kos\">{</span>\n      <span class=\"pl-s\">'id'</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'name'</span>: <span class=\"pl-s\">'CV Vall D\\'Hebron'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'country'</span>: <span class=\"pl-s\">'Spain'</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'visitor'</span>: <span class=\"pl-kos\">{</span>\n      <span class=\"pl-s\">'id'</span>: <span class=\"pl-c1\">4</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'name'</span>: <span class=\"pl-s\">'Volei Rubi'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'country'</span>: <span class=\"pl-s\">'Spain'</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'competition'</span>: <span class=\"pl-kos\">{</span>\n      <span class=\"pl-s\">'name'</span>: <span class=\"pl-s\">'1st Division League'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'category'</span>: <span class=\"pl-s\">'Junior'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-s\">'sport'</span>: <span class=\"pl-s\">'Futsal'</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'date'</span>: <span class=\"pl-s\">'2022-08-10T00:00:00'</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-s\">'price'</span>: <span class=\"pl-c1\">111.1</span>\n  <span class=\"pl-kos\">}</span>\n<span class=\"pl-kos\">]</span></pre></div>\n<p dir=\"auto\">Creeu un bucle <code>v-for</code> al template per visualitzar cada esdeveniment per separat:</p>\n<div class=\"highlight highlight-text-html-basic notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"&lt;div class=&quot;container&quot;&gt;\n  &lt;div class=&quot;row&quot;&gt;\n    &lt;div class=&quot;col-lg-4 col-md-6 mb-4&quot; v-for=&quot;(match) in matches&quot; :key=&quot;match.id&quot;&gt;\n      &lt;br&gt;\n      &lt;h5&gt;{{ match.competition.sport }} - {{ match.competition.category }}&lt;/h5&gt;\n      &lt;h6&gt;{{ match.competition.name }}&lt;/h6&gt;\n      &lt;h6&gt;&lt;strong&gt;{{ match.local.name }}&lt;/strong&gt; ({{ match.local.country }}) vs &lt;strong&gt;{{ match.visitor.name }}&lt;/strong&gt; ({{ match.visitor.country }})&lt;/h6&gt;\n      &lt;h6&gt;{{ match.date.substring(0,10) }}&lt;/h6&gt;\n      &lt;h6&gt;{{ match.price }} &amp;euro;&lt;/h6&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\"><pre><span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">div</span> <span class=\"pl-c1\">class</span>=\"<span class=\"pl-s\">container</span>\"<span class=\"pl-kos\">&gt;</span>\n  <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">div</span> <span class=\"pl-c1\">class</span>=\"<span class=\"pl-s\">row</span>\"<span class=\"pl-kos\">&gt;</span>\n    <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">div</span> <span class=\"pl-c1\">class</span>=\"<span class=\"pl-s\">col-lg-4 col-md-6 mb-4</span>\" <span class=\"pl-c1\">v-for</span>=\"<span class=\"pl-s\">(match) in matches</span>\" <span class=\"pl-c1\">:key</span>=\"<span class=\"pl-s\">match.id</span>\"<span class=\"pl-kos\">&gt;</span>\n      <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">br</span><span class=\"pl-kos\">&gt;</span>\n      <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">h5</span><span class=\"pl-kos\">&gt;</span>{{ match.competition.sport }} - {{ match.competition.category }}<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">h5</span><span class=\"pl-kos\">&gt;</span>\n      <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">h6</span><span class=\"pl-kos\">&gt;</span>{{ match.competition.name }}<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">h6</span><span class=\"pl-kos\">&gt;</span>\n      <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">h6</span><span class=\"pl-kos\">&gt;</span><span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">strong</span><span class=\"pl-kos\">&gt;</span>{{ match.local.name }}<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">strong</span><span class=\"pl-kos\">&gt;</span> ({{ match.local.country }}) vs <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">strong</span><span class=\"pl-kos\">&gt;</span>{{ match.visitor.name }}<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">strong</span><span class=\"pl-kos\">&gt;</span> ({{ match.visitor.country }})<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">h6</span><span class=\"pl-kos\">&gt;</span>\n      <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">h6</span><span class=\"pl-kos\">&gt;</span>{{ match.date.substring(0,10) }}<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">h6</span><span class=\"pl-kos\">&gt;</span>\n      <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">h6</span><span class=\"pl-kos\">&gt;</span>{{ match.price }} &amp;euro;<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">h6</span><span class=\"pl-kos\">&gt;</span>\n    <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">div</span><span class=\"pl-kos\">&gt;</span>\n  <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">div</span><span class=\"pl-kos\">&gt;</span>\n<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">div</span><span class=\"pl-kos\">&gt;</span></pre></div>\n<h3 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-exercici-1\" class=\"anchor\" aria-hidden=\"true\" href=\"#exercici-1\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Exercici 1:</h3>\n<p dir=\"auto\">Modifiqueu el codi actual per mostrar els partits de manera estructurada. Una forma podria ser utilitzar targetes (<a href=\"https://getbootstrap.com/docs/4.0/components/card/\" rel=\"nofollow\">https://getbootstrap.com/docs/4.0/components/card/</a>). A més, implementeu el botó \"Afegeix a la cistella\" i afegiu una imatge d'un partit que us agradi a cada targeta. Aquest botó també ha d'afegir l'esdeveniment comprat amb la seva informació en una llista de <code>matches_added:[]</code> definida a <code>data()</code> i  tenint en compte que per afegir un nou show feu servir aquesta instrucció <code>this.matches_added.push(match)</code>. Associeu una funció <code>addEventToCart</code> que faci això quan es cliqui al botó. No us preocupeu pel nombre d’entrades disponibles. Més endavant, gestionarem el nombre de tiquets disponibles on haurem de disminuir el nombre de tiquets comprats.</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/SoftwareDistribuitUB-2023/P2/blob/main/figures/sessio-4_ex1.png\"><img src=\"/SoftwareDistribuitUB-2023/P2/raw/main/figures/sessio-4_ex1.png\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<h2 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-obtenir-dades-dapis-amb-axios\" class=\"anchor\" aria-hidden=\"true\" href=\"#obtenir-dades-dapis-amb-axios\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Obtenir dades d'APIs amb AXIOS</h2>\n<p dir=\"auto\">Per a poder obtenir dades amb la mateixa estructura que el diccionari anterior, necessitem afegir certa informació a l'output de l'endpoint matches. Ajusteu el schema de l'endpoint matches perquè retorni la informació de la competició.</p>\n<p dir=\"auto\">En lloc de declarar una llista de partits, fem servir la nostra API desenvolupada a FastAPI per GET, POST, PUT i DELETE mitjançant Vue. Per consumir rutes des de Vue, fem servir la biblioteca axios:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"npm install axios -saves\"><pre class=\"notranslate\"><code>npm install axios -saves\n</code></pre></div>\n<p dir=\"auto\">Importeu axios a l'script just després de <code>&lt;script&gt;</code>:</p>\n<div class=\"highlight highlight-text-html-basic notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"&lt;script&gt;\nimport axios from 'axios'\n\nexport default {\"><pre><span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">script</span><span class=\"pl-kos\">&gt;</span>\nimport axios from 'axios'\n\nexport default {</pre></div>\n<p dir=\"auto\">Executeu l'aplicació FastAPI i afegiu el codi següent als mètodes de vue:</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"getMatches () {\n      const pathMatches = 'http://localhost:8000/matches/'\n      const pathCompetition = 'http://localhost:8000/competition/'\n\n      axios.get(pathMatches)\n        .then((res) =&gt; {\n          var matches = res.data.matches.filter((match) =&gt; {\n            return match.competition_id != null\n          })\n          var promises = []\n          for (let i = 0; i &lt; matches.length; i++) {\n            const promise = axios.get(pathCompetition + matches[i].competition_id)\n              .then((resCompetition) =&gt; {\n                delete matches[i].competition_id\n                matches[i].competition = {\n                  'name': resCompetition.data.competition.name,\n                  'category': resCompetition.data.competition.category,\n                  'sport': resCompetition.data.competition.sport\n                }\n              })\n              .catch((error) =&gt; {\n                console.error(error)\n              })\n            promises.push(promise)\n          }\n          Promise.all(promises).then((_) =&gt; {\n            this.matches = matches\n          })\n        })\n        .catch((error) =&gt; {\n          console.error(error)\n        })\n    }\"><pre><span class=\"pl-en\">getMatches</span> <span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\"></span> <span class=\"pl-kos\">{</span>\n      <span class=\"pl-k\">const</span> <span class=\"pl-s1\">pathMatches</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'http://localhost:8000/matches/'</span>\n      <span class=\"pl-k\">const</span> <span class=\"pl-s1\">pathCompetition</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'http://localhost:8000/competition/'</span>\n\n      <span class=\"pl-s1\">axios</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">get</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">pathMatches</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">.</span><span class=\"pl-en\">then</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">res</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n          <span class=\"pl-k\">var</span> <span class=\"pl-s1\">matches</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">res</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">data</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">matches</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">filter</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">match</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-k\">return</span> <span class=\"pl-s1\">match</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">competition_id</span> <span class=\"pl-c1\">!=</span> <span class=\"pl-c1\">null</span>\n          <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n          <span class=\"pl-k\">var</span> <span class=\"pl-s1\">promises</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span>\n          <span class=\"pl-k\">for</span> <span class=\"pl-kos\">(</span><span class=\"pl-k\">let</span> <span class=\"pl-s1\">i</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">0</span><span class=\"pl-kos\">;</span> <span class=\"pl-s1\">i</span> <span class=\"pl-c1\">&lt;</span> <span class=\"pl-s1\">matches</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">length</span><span class=\"pl-kos\">;</span> <span class=\"pl-s1\">i</span><span class=\"pl-c1\">++</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-k\">const</span> <span class=\"pl-s1\">promise</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">axios</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">get</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">pathCompetition</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s1\">matches</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">competition_id</span><span class=\"pl-kos\">)</span>\n              <span class=\"pl-kos\">.</span><span class=\"pl-en\">then</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">resCompetition</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n                <span class=\"pl-k\">delete</span> <span class=\"pl-s1\">matches</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">competition_id</span>\n                <span class=\"pl-s1\">matches</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">competition</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span>\n                  <span class=\"pl-s\">'name'</span>: <span class=\"pl-s1\">resCompetition</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">data</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">competition</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">name</span><span class=\"pl-kos\">,</span>\n                  <span class=\"pl-s\">'category'</span>: <span class=\"pl-s1\">resCompetition</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">data</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">competition</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">category</span><span class=\"pl-kos\">,</span>\n                  <span class=\"pl-s\">'sport'</span>: <span class=\"pl-s1\">resCompetition</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">data</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">competition</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">sport</span>\n                <span class=\"pl-kos\">}</span>\n              <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n              <span class=\"pl-kos\">.</span><span class=\"pl-en\">catch</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">error</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n                <span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">error</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">error</span><span class=\"pl-kos\">)</span>\n              <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n            <span class=\"pl-s1\">promises</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">push</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">promise</span><span class=\"pl-kos\">)</span>\n          <span class=\"pl-kos\">}</span>\n          <span class=\"pl-v\">Promise</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">all</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">promises</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">then</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">_</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">matches</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">matches</span>\n          <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">.</span><span class=\"pl-en\">catch</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">error</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n          <span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">error</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">error</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">On <code>/matches</code> tornarà la llista de tots els partits que ja heu registrat. Per exemple:</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/SoftwareDistribuitUB-2023/P2/blob/main/figures/sessio-4_api.png\"><img src=\"/SoftwareDistribuitUB-2023/P2/raw/main/figures/sessio-4_api.png\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">I per una altra banda, estem utilitzant els endpoints <code>/competition/&lt;id&gt;</code> per a recuperar la informació de les competicions i inserir-la al diccionari.</p>\n<p dir=\"auto\">A més, afegiu created() sota i fora dels mètodes. Permet que el codi s’executi cada vegada que s’inicialitza la web.</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"created () {\n    this.getMatches()\n  }\"><pre><span class=\"pl-en\">created</span> <span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n    <span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">getMatches</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">D’aquesta manera, podeu obtenir les dades de la vostra API.</p>\n<h3 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-exercici-2\" class=\"anchor\" aria-hidden=\"true\" href=\"#exercici-2\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Exercici 2:</h3>\n<p dir=\"auto\">Canvieu la llista de partits creada a l'apartat anterior per una llista buida, i comproveu que el codi per aconseguir els partits de la nostra API funciona correctament.</p>\n<h2 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-vista-de-la-cistella\" class=\"anchor\" aria-hidden=\"true\" href=\"#vista-de-la-cistella\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Vista de la cistella</h2>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/SoftwareDistribuitUB-2023/P2/blob/main/figures/sessio-4_cart-home.png\"><img src=\"/SoftwareDistribuitUB-2023/P2/raw/main/figures/sessio-4_cart-home.png\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">En aquesta vista, veurem totes les comandes de l'usuari. A més, l'usuari podrà finalitzar la compra. Aquesta vista es pot definir com a part de Matches.vue, però no en un component nou, només en un condicional per mostrar la part de partits o la part de la cistella.</p>\n<h2 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-canvis-en-el-backend-per-a-la-cistella\" class=\"anchor\" aria-hidden=\"true\" href=\"#canvis-en-el-backend-per-a-la-cistella\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Canvis en el Backend per a la cistella:</h2>\n<p dir=\"auto\">Abans de continuar amb la nostra visualització de partits, implementem un model de compte d'usuari per identificar un usuari i guardar les seves comandes comprades. En primer lloc, com heu fet anteriorment amb Match o Competition, creeu un model nou anomenat Account a models.py. En aquest cas, utilitzarem una relació d'un a molts. La taula \"Accounts\" té les columnes següents:</p>\n<div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Account(Base):\n    __tablename__ = 'accounts'\n\n    username = Column(String(30), primary_key=True, unique=True, nullable=False)\n    password = Column(String(), nullable=False)\n    # 0 not admin/ 1 is admin\n    is_admin = Column(Integer, nullable=False)\n    available_money = Column(Float, nullable=False)\n    orders = relationship('Order', backref='orders', lazy=True) \n\n    def __init__(self, username, available_money=200, is_admin=0):\n        self.username = username\n        self.available_money = available_money\n        self.is_admin = is_admin\n\"><pre><span class=\"pl-k\">class</span> <span class=\"pl-v\">Account</span>(<span class=\"pl-v\">Base</span>):\n    <span class=\"pl-s1\">__tablename__</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'accounts'</span>\n\n    <span class=\"pl-s1\">username</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Column</span>(<span class=\"pl-v\">String</span>(<span class=\"pl-c1\">30</span>), <span class=\"pl-s1\">primary_key</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>, <span class=\"pl-s1\">unique</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>, <span class=\"pl-s1\">nullable</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">False</span>)\n    <span class=\"pl-s1\">password</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Column</span>(<span class=\"pl-v\">String</span>(), <span class=\"pl-s1\">nullable</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">False</span>)\n    <span class=\"pl-c\"># 0 not admin/ 1 is admin</span>\n    <span class=\"pl-s1\">is_admin</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Column</span>(<span class=\"pl-v\">Integer</span>, <span class=\"pl-s1\">nullable</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">False</span>)\n    <span class=\"pl-s1\">available_money</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Column</span>(<span class=\"pl-v\">Float</span>, <span class=\"pl-s1\">nullable</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">False</span>)\n    <span class=\"pl-s1\">orders</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">relationship</span>(<span class=\"pl-s\">'Order'</span>, <span class=\"pl-s1\">backref</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'orders'</span>, <span class=\"pl-s1\">lazy</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>) \n\n    <span class=\"pl-k\">def</span> <span class=\"pl-en\">__init__</span>(<span class=\"pl-s1\">self</span>, <span class=\"pl-s1\">username</span>, <span class=\"pl-s1\">available_money</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">200</span>, <span class=\"pl-s1\">is_admin</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">0</span>):\n        <span class=\"pl-s1\">self</span>.<span class=\"pl-s1\">username</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">username</span>\n        <span class=\"pl-s1\">self</span>.<span class=\"pl-s1\">available_money</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">available_money</span>\n        <span class=\"pl-s1\">self</span>.<span class=\"pl-s1\">is_admin</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">is_admin</span></pre></div>\n<p dir=\"auto\">No inicialitzarem Account amb una contrasenya. Veurem a les properes sessions per què, però per al proper exercici només heu de tenir una contrasenya falsa: inicialitzeu el camp de la contrasenya a la funció init del Account fent \"self.password = 'test'\".</p>\n<p dir=\"auto\">Un cop creat Account, creem un model i un recurs nous per desar tots els partits comprats. L'anomenarem Order. Camps de la taula de comandes:</p>\n<div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Order(Base):\n    __tablename__ = 'orders' \n\n    id = Column(Integer, primary_key=True)\n    username = Column(String(30), ForeignKey('accounts.username'), nullable=False)\n    match_id = Column(Integer, nullable=False)\n    tickets_bought = Column(Integer, nullable=False)\n    \n    def __init__(self, match_id, tickets_bought):\n        self.match_id = match_id\n        self.tickets_bought = tickets_bought\n\"><pre><span class=\"pl-k\">class</span> <span class=\"pl-v\">Order</span>(<span class=\"pl-v\">Base</span>):\n    <span class=\"pl-s1\">__tablename__</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'orders'</span> \n\n    <span class=\"pl-s1\">id</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Column</span>(<span class=\"pl-v\">Integer</span>, <span class=\"pl-s1\">primary_key</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>)\n    <span class=\"pl-s1\">username</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Column</span>(<span class=\"pl-v\">String</span>(<span class=\"pl-c1\">30</span>), <span class=\"pl-v\">ForeignKey</span>(<span class=\"pl-s\">'accounts.username'</span>), <span class=\"pl-s1\">nullable</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">False</span>)\n    <span class=\"pl-s1\">match_id</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Column</span>(<span class=\"pl-v\">Integer</span>, <span class=\"pl-s1\">nullable</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">False</span>)\n    <span class=\"pl-s1\">tickets_bought</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Column</span>(<span class=\"pl-v\">Integer</span>, <span class=\"pl-s1\">nullable</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">False</span>)\n    \n    <span class=\"pl-k\">def</span> <span class=\"pl-en\">__init__</span>(<span class=\"pl-s1\">self</span>, <span class=\"pl-s1\">match_id</span>, <span class=\"pl-s1\">tickets_bought</span>):\n        <span class=\"pl-s1\">self</span>.<span class=\"pl-s1\">match_id</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">match_id</span>\n        <span class=\"pl-s1\">self</span>.<span class=\"pl-s1\">tickets_bought</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">tickets_bought</span></pre></div>\n<p dir=\"auto\">Finalment, afegiu un camp nou <code>total_available_tickets</code> al model de Match que per defecte sigui el nombre de localitats del lloc on s'està fent i feu les actualitzacions necessàries al constructor.\n<code>total_available_tickets = Column(Integer)</code></p>\n<h3 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-exercici-3\" class=\"anchor\" aria-hidden=\"true\" href=\"#exercici-3\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Exercici 3:</h3>\n<p dir=\"auto\">Creeu aquests punts finals (endpoints) a <code>main.py</code>, així com els schemas corresponents a <code>schemas.py</code>:</p>\n<ul dir=\"auto\">\n<li>POST: crea un nou compte d'usuari.</li>\n<li>GET: retorna totes les comandes per nom d'usuari.</li>\n<li>POST: afegeix una nova comanda per nom d'usuari.</li>\n<li>GET: retorna totes les comandes.</li>\n</ul>\n<div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@app.post('/account', response_model=schemas.Account)\n@app.get('/orders/{username}', response_model=schemas.Order)\n@app.post('/orders/{username}', response_model=schemas.Order)\n@app.get('/orders', response_model=list[schemas.Order])')\"><pre><span class=\"pl-en\">@<span class=\"pl-s1\">app</span>.<span class=\"pl-en\">post</span>(<span class=\"pl-s\">'/account'</span>, <span class=\"pl-s1\">response_model</span><span class=\"pl-c1\">=</span><span class=\"pl-s1\">schemas</span>.<span class=\"pl-v\">Account</span>)</span>\n<span class=\"pl-en\">@<span class=\"pl-s1\">app</span>.<span class=\"pl-en\">get</span>(<span class=\"pl-s\">'/orders/{username}'</span>, <span class=\"pl-s1\">response_model</span><span class=\"pl-c1\">=</span><span class=\"pl-s1\">schemas</span>.<span class=\"pl-v\">Order</span>)</span>\n<span class=\"pl-en\">@<span class=\"pl-s1\">app</span>.<span class=\"pl-en\">post</span>(<span class=\"pl-s\">'/orders/{username}'</span>, <span class=\"pl-s1\">response_model</span><span class=\"pl-c1\">=</span><span class=\"pl-s1\">schemas</span>.<span class=\"pl-v\">Order</span>)</span>\n@<span class=\"pl-s1\">app</span>.<span class=\"pl-en\">get</span>(<span class=\"pl-s\">'/orders'</span>, <span class=\"pl-s1\">response_model</span><span class=\"pl-c1\">=</span><span class=\"pl-s1\">list</span>[<span class=\"pl-s1\">schemas</span>.<span class=\"pl-v\">Order</span>])')</pre></div>\n<p dir=\"auto\">A <code>repository</code> feu els següents passos per a la lògica de negoci d'afegir una nova comanda:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"   1. Comproveu si l'usuari té prou diners per comprar el bitllet\n\n   2. Comproveu si hi ha entrades disponibles\n\n   3. Actualitzeu les entrades disponibles a Match (- entrades comprades)\n\n   4. Actualitzeu els diners de l'usuari després de comprar els bitllets (-preu * bitllets comprat)\n\n   5. Afegiu la comanda a la relació d'usuari `user.orders.append(new_order)`\n\n   6. Deseu els canvis fets a  comanda, match i l'usuari a la BD. **Atenció!** amb les condicions de carrera!. Feu un sol commit per a totes les operacions i comproveu si es provoca algun error, en aquest cas caldrà fer un rollback i tornar-ho a intentar o retornar un error.\"><pre class=\"notranslate\"><code>   1. Comproveu si l'usuari té prou diners per comprar el bitllet\n\n   2. Comproveu si hi ha entrades disponibles\n\n   3. Actualitzeu les entrades disponibles a Match (- entrades comprades)\n\n   4. Actualitzeu els diners de l'usuari després de comprar els bitllets (-preu * bitllets comprat)\n\n   5. Afegiu la comanda a la relació d'usuari `user.orders.append(new_order)`\n\n   6. Deseu els canvis fets a  comanda, match i l'usuari a la BD. **Atenció!** amb les condicions de carrera!. Feu un sol commit per a totes les operacions i comproveu si es provoca algun error, en aquest cas caldrà fer un rollback i tornar-ho a intentar o retornar un error.\n</code></pre></div>\n<h2 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-vista-taula-de-la-cistella\" class=\"anchor\" aria-hidden=\"true\" href=\"#vista-taula-de-la-cistella\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Vista taula de la cistella</h2>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/SoftwareDistribuitUB-2023/P2/blob/main/figures/sessio-4_cart.png\"><img src=\"/SoftwareDistribuitUB-2023/P2/raw/main/figures/sessio-4_cart.png\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">Ara ja podem tornar a editar el nostre frontend. Fem la taula on l'usuari pot visualitzar la seva comanda i la seva informació. En aquesta taula, podem veure:</p>\n<ol dir=\"auto\">\n<li>\n<p dir=\"auto\"><strong>Esport</strong></p>\n</li>\n<li>\n<p dir=\"auto\"><strong>Competició</strong></p>\n</li>\n<li>\n<p dir=\"auto\"><strong>Partit</strong> (Club Juventut Les Corts vs CE Sabadell)</p>\n</li>\n<li>\n<p dir=\"auto\"><strong>Quantitat</strong>: quantitat d'entrades comprades per a aquest espectacle. L'usuari pot interactuar afegint o restant un bitllet amb dos botons.</p>\n</li>\n<li>\n<p dir=\"auto\"><strong>Preu</strong>: preu per bitllet</p>\n</li>\n<li>\n<p dir=\"auto\"><strong>Total</strong>: suma del preu de totes les entrades</p>\n</li>\n<li>\n<p dir=\"auto\"><strong>Eliminar entrada</strong>: botó per esborrar un partit de la cistella</p>\n</li>\n</ol>\n<p dir=\"auto\">Per crear aquesta taula, podeu utilitzar l'estructura clàssica\n(<a href=\"https://www.w3schools.com/html/html_tables.asp\" rel=\"nofollow\">https://www.w3schools.com/html/html_tables.asp</a>). <code>&lt;thead&gt;</code> conté les capçaleres:</p>\n<div class=\"highlight highlight-text-html-basic notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"&lt;table&gt;\n  &lt;thead&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Sport&lt;/th&gt;\n    &lt;th&gt;Competition&lt;/th&gt;\n    &lt;th&gt;Match&lt;/th&gt;\n    &lt;th&gt;Quantity&lt;/th&gt;\n    &lt;th&gt;Price(&amp;euro;)&lt;/th&gt;\n    &lt;th&gt;&lt;/th&gt;\n  &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    ...\n  &lt;/tbody&gt;\n&lt;/table&gt;\"><pre><span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">table</span><span class=\"pl-kos\">&gt;</span>\n  <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">thead</span><span class=\"pl-kos\">&gt;</span>\n  <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">tr</span><span class=\"pl-kos\">&gt;</span>\n    <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span>Sport<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span>\n    <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span>Competition<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span>\n    <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span>Match<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span>\n    <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span>Quantity<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span>\n    <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span>Price(&amp;euro;)<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span>\n    <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span><span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">th</span><span class=\"pl-kos\">&gt;</span>\n  <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">tr</span><span class=\"pl-kos\">&gt;</span>\n  <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">thead</span><span class=\"pl-kos\">&gt;</span>\n  <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">tbody</span><span class=\"pl-kos\">&gt;</span>\n    ...\n  <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">tbody</span><span class=\"pl-kos\">&gt;</span>\n<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">table</span><span class=\"pl-kos\">&gt;</span></pre></div>\n<p dir=\"auto\"><code>&lt;tbody&gt;</code> en el nostre cas, conté la informació i els botons a\ninteractuar (augmentar, disminuir)</p>\n<h3 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-exercici-5\" class=\"anchor\" aria-hidden=\"true\" href=\"#exercici-5\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Exercici 5:</h3>\n<ol dir=\"auto\">\n<li>\n<p dir=\"auto\">Creeu una taula amb partits i la seva informació</p>\n</li>\n<li>\n<p dir=\"auto\">Creeu els botons per augmentar i disminuir el nombre d'entrades pels partits en la cistella i els seus mètodes associats quan es faci click.</p>\n</li>\n</ol>\n<h2 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-botó-de-tornar-enrere\" class=\"anchor\" aria-hidden=\"true\" href=\"#botó-de-tornar-enrere\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Botó de tornar enrere</h2>\n<p dir=\"auto\">Creem un botó per tornar a la vista principal:</p>\n<ol dir=\"auto\">\n<li>\n<p dir=\"auto\">Creeu una variable anomenada, per exemple, <code>is_showing_cart</code>. Serà el nostre condicional per mostrar la vista de Partits o de Cistella.</p>\n</li>\n<li>\n<p dir=\"auto\">Enllaceu la variable creada anteriorment amb un botó nou \"Veure cistella\" per mostrar la cistella que faci (is_showing_cart = true)</p>\n</li>\n<li>\n<p dir=\"auto\">Enllaça la variable creada anteriorment amb un nou botó \"Enrere\" que faci (is_showing_cart = false)</p>\n</li>\n</ol>\n<p dir=\"auto\">per alternar d'una vista a l'altra, feu servir el v-if   en el <code>&lt;div&gt;</code> on es mostri la cistella:</p>\n<div class=\"highlight highlight-text-html-basic notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"\t&lt;div v-if=&quot;is_showing_cart&quot; class=&quot;container&quot;&gt; \n\t\t&lt;h1&gt; Cart &lt;/h1&gt;\n\t\t...\n\t&lt;/div&gt;\n\t&lt;div v-else class=&quot;container&quot;&gt;\n\t\t...\n\t&lt;/div&gt;\t\"><pre>\t<span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">div</span> <span class=\"pl-c1\">v-if</span>=\"<span class=\"pl-s\">is_showing_cart</span>\" <span class=\"pl-c1\">class</span>=\"<span class=\"pl-s\">container</span>\"<span class=\"pl-kos\">&gt;</span> \n\t\t<span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">h1</span><span class=\"pl-kos\">&gt;</span> Cart <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">h1</span><span class=\"pl-kos\">&gt;</span>\n\t\t...\n\t<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">div</span><span class=\"pl-kos\">&gt;</span>\n\t<span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">div</span> <span class=\"pl-c1\">v-else</span> <span class=\"pl-c1\">class</span>=\"<span class=\"pl-s\">container</span>\"<span class=\"pl-kos\">&gt;</span>\n\t\t...\n\t<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">div</span><span class=\"pl-kos\">&gt;</span>\t</pre></div>\n<p dir=\"auto\">Podeu fer servir v-if en qualsevol tag per que es mostri en cas de ser cert o ocultar-lo en cas de ser fals, per exemple podeu fer que s'activi la taula només si hi ha elements en la taula així:</p>\n<div class=\"highlight highlight-text-html-basic notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  &lt;table v-if=&quot;matches_added.length &gt; 0&quot; class=&quot;table&quot;&gt;\n    ...\n  &lt;/table&gt;\n  &lt;p v-else&gt;Your cart is currently empty.&lt;/p&gt;\"><pre>  <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">table</span> <span class=\"pl-c1\">v-if</span>=\"<span class=\"pl-s\">matches_added.length &gt; 0</span>\" <span class=\"pl-c1\">class</span>=\"<span class=\"pl-s\">table</span>\"<span class=\"pl-kos\">&gt;</span>\n    ...\n  <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">table</span><span class=\"pl-kos\">&gt;</span>\n  <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">p</span> <span class=\"pl-c1\">v-else</span><span class=\"pl-kos\">&gt;</span>Your cart is currently empty.<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">p</span><span class=\"pl-kos\">&gt;</span></pre></div>\n<p dir=\"auto\">Qualsevol v-else que poseu buscarà l'últim v-if que hi hagi, i el bloc definit per la condició serà des de l'v-if fins al v-else.</p>\n<h2 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-finalitza-el-botó-de-compra\" class=\"anchor\" aria-hidden=\"true\" href=\"#finalitza-el-botó-de-compra\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Finalitza el botó de compra</h2>\n<p dir=\"auto\">Aquest botó executa un mètode POST que desa totes les files de comanda de la base de dades:</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"addPurchase (parameters) {\n  const path = 'http://localhost:8000/order/test'\n  axios.post(path, parameters)\n    .then(() =&gt; {\n      console.log('Order done')\n    })\n    .catch((error) =&gt; {\n      // eslint-disable-next-line\n      console.log(error)\n      this.getMatches()\n    })\n},\"><pre><span class=\"pl-en\">addPurchase</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">parameters</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\"></span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-k\">const</span> <span class=\"pl-s1\">path</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'http://localhost:8000/order/test'</span>\n  <span class=\"pl-s1\">axios</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">post</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">path</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">parameters</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">.</span><span class=\"pl-en\">then</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n      <span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'Order done'</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">.</span><span class=\"pl-en\">catch</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">error</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n      <span class=\"pl-c\">// eslint-disable-next-line</span>\n      <span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">error</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">getMatches</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span></pre></div>\n<p dir=\"auto\">amb els paràmetres:</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"const parameters = {\n  match_id: this.matches_added[i].match.id,\n  tickets_bought: this.matches_added[i].quantity\n}\"><pre><span class=\"pl-k\">const</span> <span class=\"pl-s1\">parameters</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-c1\">match_id</span>: <span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">matches_added</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">match</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">id</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">tickets_bought</span>: <span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">matches_added</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">quantity</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">A continuació, hauríem de restablir la llista on emmagatzemem\nels partits per comprar i desactivar el botó finalitzar la compra. L'usuari hauria de veure:</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/SoftwareDistribuitUB-2023/P2/blob/main/figures/sessio-4_cart-empty.png\"><img src=\"/SoftwareDistribuitUB-2023/P2/raw/main/figures/sessio-4_cart-empty.png\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">Ara tenim la informació per actualitzar els diners disponibles de l’usuari després de comprar la comanda.</p>\n<h3 tabindex=\"-1\" dir=\"auto\"><a id=\"user-content-exercici-7\" class=\"anchor\" aria-hidden=\"true\" href=\"#exercici-7\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Exercici 7:</h3>\n<ol dir=\"auto\">\n<li>\n<p dir=\"auto\">Creeu un botó anomenat Finalitzar la compra</p>\n</li>\n<li>\n<p dir=\"auto\">Creeu un mètode POST per enviar la compra  (POST per fila)</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"finalizePurchase () {\n  for (let i = 0; i &lt; this.matches_added.length; i += 1) {\n    const parameters = {\n      match_id: this.matches_added[i].match.id,\n      tickets_bought: this.matches_added[i].quantity\n    }\n    this.addPurchase(parameters)\n  }\n}\"><pre><span class=\"pl-en\">finalizePurchase</span> <span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\"></span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-k\">for</span> <span class=\"pl-kos\">(</span><span class=\"pl-k\">let</span> <span class=\"pl-s1\">i</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">0</span><span class=\"pl-kos\">;</span> <span class=\"pl-s1\">i</span> <span class=\"pl-c1\">&lt;</span> <span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">matches_added</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">length</span><span class=\"pl-kos\">;</span> <span class=\"pl-s1\">i</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">const</span> <span class=\"pl-s1\">parameters</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span>\n      <span class=\"pl-c1\">match_id</span>: <span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">matches_added</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">match</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">id</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-c1\">tickets_bought</span>: <span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">matches_added</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">quantity</span>\n    <span class=\"pl-kos\">}</span>\n    <span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">addPurchase</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">parameters</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-kos\">}</span>\n<span class=\"pl-kos\">}</span></pre></div>\n</li>\n</ol>\n<p dir=\"auto\">Podeu fer una crida a l'endpoint del post de les comandes per cada partit per separat. En aquest cas haureu d'esperar el resultat de la crida per fer la següent, ja que l'usuari es pot haver quedat sense diners, o no quedi prou entrades per comprar. En aquest cas\nes tracta la cistella com si fossin comandes independents.</p>\n<p dir=\"auto\">Per tal d'enviar-les totes de cop i que sigui el backend que comprovi si es poden fer totes les compres o no, podeu fer que l'endpoint del post de les comandes accepti una llista de comandes i fer una única crida al backend. En aquest cas\nla cistella es tracta com una única comanda, en el sentit que o es compren totes les entrades o no es compra cap.</p>\n<ol start=\"3\" dir=\"auto\">\n<li>Inicialitzar la cistella i desactivar el botó</li>\n</ol>\n</article>","renderedFileInfo":null,"tabSize":8,"topBannersInfo":{"overridingGlobalFundingFile":false,"globalPreferredFundingPath":null,"repoOwner":"SoftwareDistribuitUB-2023","repoName":"P2","showInvalidCitationWarning":false,"citationHelpUrl":"https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-citation-files","showDependabotConfigurationBanner":false,"actionsOnboardingTip":null},"truncated":false,"viewable":true,"workflowRedirectUrl":null,"symbols":{"timedOut":false,"notAnalyzed":true,"symbols":[]}},"csrf_tokens":{"/SoftwareDistribuitUB-2023/P2/branches":{"post":"YlqyQ6wOkuLl-EHQpDFU0glbToyIBrWy_zjdgfSI3leqtNVN7Xd0sU91jPLTwfUGgl9EgGR-K0OvgltvS-6LHA"}}},"title":"P2/Sessio_4.md at main · SoftwareDistribuitUB-2023/P2","locale":"en"}